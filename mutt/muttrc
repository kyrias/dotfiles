# Compose View Options -------------------------------
set realname		= "Johannes Löthberg"
set from		= "johannes@kyriasis.com"
set envelope_from	# which from?
set sig_dashes		# dashes before sig
set edit_headers	# show headers when composing
set fast_reply		# skip to compose when replying
set fcc_attach		# save attachments with the body
unset mime_forward	# forward attachments as part of body
set forward_format	= "Fwd: %s"	# format of subject when forwarding
set forward_decode	# decode when forwarding
set attribution		= "On %d, %n wrote:"	# format of quoting header
set reply_to		# reply to Reply to: field
set reverse_name	# reply as whomever it was to
set include		# include message in replies
set forward_quote	# include message in forwards
set charset 		= "utf-8"
set send_charset 	= "utf-8"

set editor 		= "vim"
set text_flowed		= yes
set mark_old		= no
set sleep_time		= 0	# no delay when opening a maildir!

set mbox_type		= Maildir
set folder		= "~/.mail/kyriasis"
set trash		= "~/.mail/kyriasis/Trash"
set header_cache	= ~/.config/mutt/cache/headers	# where to store headers
set message_cachedir	= ~/.config/mutt/cache/			# where to store bodies
set certificate_file	= ~/.config/mutt/certificates	# where to store certs
set mailcap_path	= ~/.config/mutt/mailcap		# entries for filetypes
set tmpdir		= ~/.config/mutt/temp			# where to keep temp files
set signature		= ~/.config/mutt/sig			# my signature file
set spoolfile		= "+INBOX"
set mbox		= "+Archives"
set postponed		= "+Drafts"
mailboxes +INBOX +Sent +Drafts +Trash +Archives +arch-dev-public +arch-bugs +Spam +Ham

## Abook
set query_command= "abook --datafile ~/.config/abook/addressbook --mutt-query '%s'"
macro index,pager  A "<pipe-message>abook --datafile ~/.config/abook/addressbook --add-email-quiet<return>" "Add this sender to Abook"
bind editor        <Tab> complete-query

# Sync email
macro index O "<shell-escape>offlineimap<enter>"           "run offlineimap to sync all mail"
macro index o "<shell-escape>offlineimap -qf INBOX<enter>" "run offlineimap to sync inbox"

set sendmail		= "/usr/bin/msmtp -a kyriasis"
set sendmail_wait	= 0
set record		= +Sent
set copy		= yes

# Basic Options --------------------------------------
#set wait_key = no        # shut up, mutt
#set timeout = 3          # idle time before scanning
#set mail_check = 0       # minimum time between scans
#unset move               # gmail does that
#set delete               # don't ask, just do
#unset confirmappend      # don't ask, just do!
#set quit                 # don't ask, just do!!
#unset mark_old           # read/new is good enough for me
set beep_new             # bell on new mails
unset pipe_decode          # strip headers and eval mimes when piping
set thorough_search      # strip headers and eval mimes before searching


# Status Bar -----------------------------------------
set status_chars  = " *%A"
set status_format = "───[ Folder: %f ]───[%r%m messages%?n? (%n new)?%?d? (%d to delete)?%?t? (%t tagged)? ]───%>─%?p?( %p postponed )?───"

# Header Options -------------------------------------
#ignore *                                # ignore all headers
#unignore from: to: cc: date: subject:   # show only these
unignore X-Spambayes-Classification: X-Spambayes-Trained:
#unhdr_order *                           # some distros order things by default
#hdr_order from: to: cc: date: subject:  # and in this order

# Index View Options ---------------------------------
set date_format = "%d/%m"
set index_format = "[%Z]  %D  %-20.20F  %s"
set sort = threads                         # like gmail
#set sort_aux = reverse-last-date-received  # like gmail
#set sort = reverse-last-date-received  # like gmail
#set sort_aux = threads                         # like gmail
set uncollapse_jump                        # don't collapse on an unread message
set sort_re                                # thread based on regex
set reply_regexp = "^(([Rr][Ee]?(\[[0-9]+\])?: *)?(\[[^]]+\] *)?)*"
# Pager View Options ---------------------------------
set pager_index_lines = 10 # number of index lines to show
set pager_context = 3      # number of context lines to show
set pager_stop             # don't go to next message automatically
set menu_scroll            # scroll in menus
set tilde                  # show tildes like in vim
unset markers              # no ugly plus signs

set quote_regexp = "^( {0,4}[>|:#%]| {0,4}[a-z0-9]+[>|]+)+"
alternative_order text/plain text/enriched text/html


macro index C "<copy-message>?<toggle-mailboxes>" "copy a message to a mailbox"
macro index M "<save-message>?<toggle-mailboxes>" "move a message to a mailbox"

# Index Key Bindings
bind index gg		first-entry
bind index G		last-entry

bind index R		group-reply
bind index S	sync-mailbox
bind index <space>	collapse-thread
bind index B		bounce-message

# Pager Key Bindings ---------------------------------
bind pager k  previous-line
bind pager j  next-line
bind pager gg top
bind pager G  bottom
bind pager R  group-reply

# Move message to Archives
macro index,pager a "s=Archives<enter>"

# View attachments properly.
bind attach <return> view-mailcap

# Save and recall drafts
bind compose P postpone-message
bind index P recall-message

source ~/.config/mutt/gpg.rc
set pgp_timeout = 3600       # how long to cache the pass-phrase
set crypt_autosign = yes
set crypt_replyencrypt = yes
set pgp_sign_as = 3A9D0BB5
set pgp_use_gpg_agent = yes
set crypt_use_pka = yes

source ~/.config/mutt/themes/comidia

subscribe arch-dev-public@archlinux.org
